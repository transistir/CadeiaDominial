{% extends "base.html" %}
{% load static %}

{% block title %}√Årvore da Cadeia Dominial - {{ imovel.nome }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'dominial/css/cadeia_dominial_arvore.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="arvore-header">
        <h1>üå≥ √Årvore da Cadeia Dominial</h1>
        <div class="imovel-info">
            <div>
                <strong>Im√≥vel:</strong>
                {{ imovel.nome }}
            </div>
            <div>
                <strong>Matr√≠cula:</strong>
                {{ imovel.matricula }}
            </div>
            <div>
                <strong>Propriet√°rio:</strong>
                {{ imovel.proprietario.nome }}
            </div>
            {% if imovel.sncr %}
            <div>
                <strong>SNCR:</strong>
                {{ imovel.sncr }}
            </div>
            {% endif %}
        </div>
    </div>

    <div class="arvore-container" id="arvore-container">
        <div class="arvore-zoom-content" id="arvore-zoom-content">
        <div class="loading">
            <span>Carregando diagrama da √°rvore da cadeia dominial...</span>
            </div>
        </div>
    </div>

    <div class="zoom-controls">
        <button onclick="zoomIn()" title="Zoom +">+</button>
        <button onclick="zoomOut()" title="Zoom -">-</button>
        <button onclick="resetZoom()" title="Reset">‚ü≤</button>
    </div>

    <div class="arvore-actions">
        <a href="{% url 'selecionar_documento_lancamento' tis_id=tis.id imovel_id=imovel.id %}" class="btn btn-success">
            ‚ûï Novo Lan√ßamento
        </a>
        <a href="{% url 'tronco_principal' tis_id=tis.id imovel_id=imovel.id %}" class="btn">
            üìã Ver Cadeia Dominial
        </a>
        <a href="{% url 'tis_detail' tis_id=tis.id %}" class="btn">
            ‚Üê Voltar
        </a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    window.tisId = {{ tis.id|safe }};
    window.imovelId = {{ imovel.id|safe }};
</script>
<script src="{% static 'dominial/js/cadeia_dominial_arvore.js' %}"></script>
{% endblock %} 