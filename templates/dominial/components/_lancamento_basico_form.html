<div class="field-group">
    <h4>Informações Básicas</h4>
    <div class="form-group">
        <label for="tipo_lancamento">Tipo de Lançamento *</label>
        <select name="tipo_lancamento" id="tipo_lancamento" required>
            <option value="">Selecione o tipo</option>
            {% for tipo in tipos_lancamento %}
            <option value="{{ tipo.id }}" data-tipo="{{ tipo.tipo }}" 
                    {% if modo_edicao and lancamento.tipo.id == tipo.id %}selected
                    {% elif form_data and form_data.tipo_lancamento == tipo.id|stringformat:"s" %}selected{% endif %}>
                {{ tipo.get_tipo_display }}
            </option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="numero_lancamento">Número do Lançamento *</label>
        <input type="text" name="numero_lancamento" id="numero_lancamento" 
               placeholder="Código/número gerado pelo cartório" required 
               value="{% if modo_edicao %}{{ lancamento.numero_lancamento }}{% elif form_data %}{{ form_data.numero_lancamento }}{% endif %}"
               class="{% if numero_lancamento_error %}error-field{% endif %}">
        <small style="color: #666; font-size: 0.9em;">Número ou código de referência do lançamento no cartório</small>
        {% if numero_lancamento_error %}
        <div class="error-message" style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">
            ⚠️ Este número de lançamento já existe neste documento
        </div>
        {% endif %}
    </div>
    <div class="form-group">
        <label for="data">Data do Lançamento *</label>
        <input type="date" name="data" id="data" required 
               value="{% if modo_edicao %}{{ lancamento.data|date:'Y-m-d' }}{% elif form_data %}{{ form_data.data }}{% endif %}">
    </div>
    <div class="toggle-group">
        <label class="toggle-label">
            <input type="checkbox" name="eh_inicio_matricula" id="eh_inicio_matricula" class="toggle-checkbox" 
                   {% if modo_edicao and lancamento.eh_inicio_matricula %}checked
                   {% elif form_data and form_data.eh_inicio_matricula %}checked{% endif %}>
            <span>Este lançamento indica um "Início de Matrícula"</span>
        </label>
        <small style="display: block; margin-top: 5px; color: #666;">
            Marque esta opção se este lançamento representa o início de uma nova matrícula, 
            mesmo que não seja do tipo "Início de Matrícula".
        </small>
    </div>
</div> 